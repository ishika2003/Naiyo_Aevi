<!DOCTYPE html>
<html lang="en">
  <!-- <div style=" position: fixed; top: 0; left: 0; right: 0; z-index: 9999; background: red; color: white; padding: 5px; text-align: center;">
  TEST BANNER — should be touching the top
</div> -->

  <head>
    <title>Aevi | Pure Nordic Skincare for Sensitive Skin | Gentle & Sustainable</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/normalize.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='icomoon/icomoon.css') }}">
    <link rel="stylesheet" type="text/css" media="all" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/vendor.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- script
    ================================================== -->
    <script src="{{ url_for('static', filename='js/modernizr.js') }}"></script>
  </head>
  <body>

    <div class="preloader-wrapper" style="background-color: transparent;">
      <div class="preloader">
      </div>
    </div>

    <div class="search-popup">
      <div class="search-popup-container">

        <form role="search" method="get" class="search-form" action="{{ url_for('shop') }}">
          <input type="search" id="search-form" class="search-field" placeholder="Type and press enter" value="" name="s" />
          <button type="submit" class="search-submit"><a href="#"><i class="icon icon-search"></i></a></button>
        </form>

        <h5 class="cat-list-title">Browse Categories</h5>
        
        <ul class="cat-list">
          <li class="cat-list-item">
            <a href="{{ url_for('category_products', category_name='cleansers-masks') }}" title="Cleansers + Masks">Cleansers + Masks</a>
          </li>
          <li class="cat-list-item">
            <a href="{{ url_for('category_products', category_name='serums-oils') }}" title="Serums + Oils">Serums + Oils</a>
          </li>
          <li class="cat-list-item">
            <a href="{{ url_for('category_products', category_name='balms') }}" title="Balms">Balms</a>
          </li>
          <li class="cat-list-item">
            <a href="{{ url_for('category_products', category_name='treatments') }}" title="Treatments">Treatments</a>
          </li>
          <li class="cat-list-item">
            <a href="{{ url_for('category_products', category_name='body') }}" title="Body">Body</a>
          </li>
          <li class="cat-list-item">
            <a href="{{ url_for('get_bestsellers') }}" title="Bestsellers">Bestsellers</a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Main Carousel -->
<header id="header" class="scroll-header" style="width: 100%; z-index: 9999; transition: background 0.3s ease;">
  <div class="primary-banner">
    <p>SIGN UP TO OUR NEWSLETTER FOR 10% OFF</p>
  </div>

  <div class="nav-container" id="main-nav-bar">
    <div class="nav-left" style="display: flex; gap: 1.5rem;">
      <a href="{{ url_for('shop') }}" style="font-weight: 500; text-decoration: none;">SHOP</a>
      <a href="#" style="font-weight: 500; text-decoration: none;">DISCOVER</a>
    </div>
    <div class="logo-sticky" style="position: absolute; left: 50%; transform: translateX(-50%);">
      <a href="{{ url_for('home') }}">
        <img src="{{ url_for('static', filename='images/AEVI/aevi-logo-100_black.svg') }}" alt="AEVI Logo" style="max-height: 40px;">
      </a>
    </div>
    <div class="nav-right" style="display: flex; gap: 1.5rem; align-items: center;">
      <a href="#" style="font-weight: 500; text-decoration: none;">REST OF WORLD / EUR</a>
      <a href="#" onclick="showNewsletterModal()" style="font-weight: 500; text-decoration: none;">SUBSCRIBE</a>
      <i class="icon icon-search"></i>
      {% if current_user.is_authenticated %}
        <a href="{{ url_for('dashboard') }}" style="text-decoration: none;"><i class="icon icon-user"></i></a>
      {% else %}
        <i class="icon icon-user" onclick="showAuthModal()"></i>
      {% endif %}
      <i class="icon icon-cart"></i>
    </div>
  </div>
</header>

<div class="swiper main-swiper">
  <div class="swiper-wrapper">
    <div class="swiper-slide" style="position: relative; background-image: url('{{ url_for('static', filename='images/AEVI/Page1.webp') }}'); background-repeat: no-repeat; background-size: cover; background-position: center;">
      <div class="aevi-logo-container" style="position: absolute; top: 24%; left: 50%; transform: translateX(-50%); z-index: 2;" id="aevi-logo-carousel">
        <img src="{{ url_for('static', filename='images/AEVI/AEVI.svg') }}" id="AEVI" alt="AEVI Logo" style="width: 100%;">
      </div>
      <div class="desc-container" style="position: absolute; bottom: 10%; left: 5%; z-index: 2; max-width: 600px;">
        <p style="font-size: 38px; color: white; font-weight: 300; margin-bottom: 25px; line-height: normal;">SKIN DETOX WITH THE<br>CLARIFYING CLAY MASK</p>
        <div class="btn-wrap">
          <a href="{{ url_for('shop') }}" style="border-radius: 30px; background-color: #a3bfdb; border: 1px solid black; padding: 10px 25px; color: black; font-weight: 500;" class="btn" tabindex="0">SHOP NOW</a>
        </div>
      </div>
    </div>
    <div class="swiper-slide" style="position: relative; background-image: url('{{ url_for('static', filename='images/AEVI/Page2.webp') }}'); background-repeat: no-repeat; background-size: cover; background-position: center;">
      <div class="aevi-logo-container" style="position: absolute; top: 24%; left: 50%; transform: translateX(-50%); z-index: 2;">
        <img src="{{ url_for('static', filename='images/AEVI/AEVI.svg') }}" id="AEVI" alt="AEVI Logo" style="width: 100%;">
      </div>
      <div class="desc-container" style="position: absolute; bottom: 10%; left: 5%; z-index: 2; max-width: 600px;">
        <p style="font-size: 38px; color: white; font-weight: 300; margin-bottom: 25px; line-height: normal;">CLEAN, GENTLE & RESULTS-DRIVEN</p>
        <div class="btn-wrap">
          <a href="{{ url_for('shop') }}" style="border-radius: 30px; background-color: #a3bfdb; border: 1px solid black; padding: 10px 25px; color: black; font-weight: 500;" class="btn" tabindex="0">SHOP NOW</a>
        </div>
      </div>
    </div>
    <div class="swiper-slide" style="position: relative; background-image: url('{{ url_for('static', filename='images/AEVI/Page3.webp') }}'); background-repeat: no-repeat; background-size: cover; background-position: center;">
      <div class="aevi-logo-container" style="position: absolute; top: 24%; left: 50%; transform: translateX(-50%); z-index: 2;">
        <img src="{{ url_for('static', filename='images/AEVI/AEVI.svg') }}" id="AEVI" alt="AEVI Logo" style="width: 100%;">
      </div>
      <div class="desc-container" style="position: absolute; bottom: 10%; left: 5%; z-index: 2; max-width: 600px;">
        <p style="font-size: 38px; color: white; font-weight: 300; margin-bottom: 25px; line-height: normal;">SKIN DETOX WITH THE CLARIFYING CLAY MASK</p>
        <div class="btn-wrap">
          <a href="{{ url_for('shop') }}" style="border-radius: 30px; background-color: #a3bfdb; border: 1px solid black; padding: 10px 25px; color: black; font-weight: 500;" class="btn" tabindex="0">SHOP NOW</a>
        </div>
      </div>
    </div>
  </div>
</div>


     <!-- FIRST LOGO MARQUEE -->

     <style>
      .logo-marquee {
        background-color: #134fc2;
        overflow: hidden;
        padding: 1rem 0;
        position: relative;
      }

      .logo-track {
        display: flex;
        flex-wrap: nowrap;
        width: max-content;
        gap: 3rem;
        animation: scroll-left 17s linear infinite;
      }

      .logo-track img {
        height: 40px;
        width: auto;
        object-fit: contain;
        filter: brightness(0) invert(1);
        transition: transform 0.3s ease;
      }

      .logo-track:hover {
          animation-play-state: paused;
        }


      @keyframes scroll-left {
        0% {
          transform: translateX(0%);
        }
        100% {
          transform: translateX(-50%);
        }
      }


     </style>

      <div class="logo-marquee">
        <div class="logo-track">
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-GentlemansJournal-White.webp') }}" alt="Logo 1" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-GetTheGloss-White_b647140e-2ae5-414a-a5ec-14867756c7f9.webp') }}" alt="Logo 2" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-Glamour-White.png') }}" alt="Logo 3" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-RobbReport-White.webp') }}" alt="Logo 4" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-Stylist-White.webp') }}" alt="Logo 5" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-Tirolerin-White.png') }}" alt="Logo 6" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-VanityFair-White.png') }}" alt="Logo 7" />


          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-GentlemansJournal-White.webp') }}" alt="Logo 1" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-GetTheGloss-White_b647140e-2ae5-414a-a5ec-14867756c7f9.webp') }}" alt="Logo 2" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-Glamour-White.png') }}" alt="Logo 3" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-RobbReport-White.webp') }}" alt="Logo 4" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-Stylist-White.webp') }}" alt="Logo 5" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-Tirolerin-White.png') }}" alt="Logo 6" />
          <img src="{{ url_for('static', filename='images/AEVI/FirstMarqu/Aevi-Website-Press-VanityFair-White.png') }}" alt="Logo 7" />
        </div>
      </div>

      <div style="margin: 5px 10px;">
        <h2 style="line-height: normal; margin-bottom: 0;">BESTSELLERS</h2>
        <p>Dermatologist-tested and clinically proven formulas with Nordic ingredients</p>
      </div>


      <!-- Products Section - Enhanced with Flask integration -->
      <style>
        .product-scroll-container {
          overflow-x: auto;
          white-space: nowrap;
          padding: 2rem;
        }

        .product-card {
          position: relative;
          width: 300px;
          display: inline-block;
          background: #fff;
          border-radius: 8px;
          margin-right: 1rem;
          box-shadow: 0 0 12px rgba(0, 0, 0, 0.1);
          transition: transform 0.4s ease;
          cursor: pointer;
        }

        .product-card:hover {
          transform: translateY(-5px);
        }

        .product-image {
          position: relative;
          overflow: hidden;
        }

        .product-image img {
          width: 100%;
          display: block;
          transition: opacity 0.3s ease;
        }

        .product-image .hover-img {
          position: absolute;
          top: 0;
          left: 0;
          opacity: 0;
        }

        .product-card:hover .hover-img {
          opacity: 1;
        }

        .product-card:hover .main-img {
          opacity: 0;
        }

        .label {
          position: absolute;
          top: 10px;
          left: 10px;
          background: #d5e0ea;
          color: #134fc2;
          padding: 5px 10px;
          font-weight: bold;
          font-size: 12px;
          border-radius: 5px;
        }

        .product-info {
          padding: 1rem;
        }

        .product-info h3 {
          font-size: 16px;
          margin: 0 0 0.3rem;
          display: flex;
          justify-content: space-between;
        }

        .product-info p {
          font-size: 14px;
          margin: 0 0 0.5rem;
        }

        .stars {
          font-size: 14px;
          color: #000;
        }

        .product-hover-popup {
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          background: rgba(255, 255, 255, 0.95);
          padding: 1rem;
          display: none;
          flex-direction: column;
        }

        .product-card:hover .product-hover-popup {
          display: flex;
        }

        .product-hover-popup label {
          display: block;
          margin-bottom: 0.5rem;
        }

        .product-hover-popup select {
          width: 100%;
          margin-bottom: 1rem;
          padding: 0.4rem;
        }

        .product-hover-popup button {
          background-color: #a3bfdb;
          color: #000;
          font-weight: bold;
          padding: 0.6rem;
          border: 1px solid black;
          border-radius: 30px;
          cursor: pointer;
        }

      </style>

      <!-- Products will be loaded dynamically from Flask API -->
      <div class="product-scroll-container" id="bestsellers-container">
        <!-- Dynamic content will be loaded here -->
      </div>

      <!-- Rest of the original content preserved -->
      <div style="display: flex; margin: 20px;">
        <div style="flex: 1; margin-right: 10px;">
          <img src="{{ url_for('static', filename='images/AEVI/two divs/Aevi-Web-Homepage-Square-01.png') }}" alt="Image 1" style="width: 100%; height: auto;">
        </div>
        <div style="flex: 1; margin-left: 10px; padding: 20px; background-color: #f8f9fa;">
          <h2 style="line-height: normal; margin-bottom: 10px;">CLEAN, GENTLE + RESULTS-DRIVEN</h2>
          <p>Aevi is made with pure, therapeutic ingredients from Nordic nature. Our performance-driven formulas are clinically tested to ensure efficacy and visible results while still being gentle for sensitive skin.</p>
          <a href="{{ url_for('about') }}" style="color: #134fc2; text-decoration: underline;">READ MORE</a>
        </div>
      </div>

      <div style="display: flex; margin: 20px;">
        <div style="flex: 1; margin-right: 10px; padding: 20px; background-color: #f8f9fa;">
          <h2 style="line-height: normal; margin-bottom: 10px;">FOR SENSITIVE SKIN, BY SENSITIVE SKIN</h2>
          <p>Aevi is dermatologically tested and suitable for even the most sensitive skin.</p>
          <p>Our skincare is expertly formulated to soothe, hydrate, nourish and strengthen the skin because we believe building healthy, resilient skin is the key to naturally radiant beauty and well-ageing.</p>
          <a href="{{ url_for('about') }}" style="color: #134fc2; text-decoration: underline;">READ MORE</a>
        </div>
        <div style="flex: 1; margin-left: 10px;">
          <img src="{{ url_for('static', filename='images/AEVI/two divs/Aevi-Web-Homepage-Square-03.png') }}" alt="Image 2" style="width: 100%; height: auto;">
        </div>
      </div>

      <!-- Include modals for newsletter and auth -->
      {% include 'navbar.html' %}

    <!-- JavaScript from original file + Flask integration -->
    <script src="{{ url_for('static', filename='js/jquery-1.11.0.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/plugins.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    
    <!-- Flask Integration JavaScript -->
    <script>
      // Load bestsellers on page load
      document.addEventListener('DOMContentLoaded', function() {
        loadBestsellers();
      });

      function loadBestsellers() {
        fetch('/api/products/bestsellers')
        .then(response => response.json())
        .then(products => {
          renderBestsellers(products);
        })
        .catch(error => {
          console.error('Error loading bestsellers:', error);
          // Fallback to static content if API fails
          loadStaticProducts();
        });
      }

      function renderBestsellers(products) {
        const container = document.getElementById('bestsellers-container');
        container.innerHTML = products.map(product => `
          <div class="product-card" onclick="goToProduct(${product.id})">
            <div class="product-image">
              <img src="${product.image_main || '{{ url_for("static", filename="images/AEVI/Cards/Card1_2.png") }}'}" alt="${product.name}" class="main-img">
              ${product.image_hover ? `<img src="${product.image_hover}" alt="${product.name}" class="hover-img">` : ''}
              ${product.is_bestseller ? '<span class="label">BESTSELLER</span>' : ''}
              ${product.is_new ? '<span class="label">NEW</span>' : ''}
            </div>
            <div class="product-info">
              <h3>${product.name} <span class="price">€${product.price}</span></h3>
              <p>${product.description}</p>
              <div class="stars">★★★★★ <span>(${product.review_count})</span></div>
            </div>
            <div class="product-hover-popup">
              <form>
                <label>
                  <input type="radio" name="delivery-${product.id}" checked>
                  Subscribe + save 15%
                </label>
                <select>
                  <option>Every 30 days</option>
                  <option>Every 60 days</option>
                </select>
                <label>
                  <input type="radio" name="delivery-${product.id}">
                  One time delivery
                </label>
                <button type="button" onclick="event.stopPropagation(); addToCart(${product.id})">ADD TO BAG</button>
              </form>
            </div>
          </div>
        `).join('');
      }

      function loadStaticProducts() {
        // Fallback static products if API fails
        const staticProducts = [
          {
            id: 1, name: 'NOURISHING FACE OIL', price: 98, 
            description: 'Radiance Enhancing Nordic Super Berries',
            image_main: '{{ url_for("static", filename="images/AEVI/Cards/Card1_2.png") }}',
            image_hover: '{{ url_for("static", filename="images/AEVI/Cards/card1_1.webp") }}',
            is_bestseller: true, review_count: 20
          },
          {
            id: 2, name: 'HYALURONIC ACID FACE SERUM', price: 94,
            description: 'Super Hydrating Seaweed + Tremella',
            image_main: '{{ url_for("static", filename="images/AEVI/Cards/Card2_2.png") }}',
            image_hover: '{{ url_for("static", filename="images/AEVI/Cards/card2_1.webp") }}',
            is_bestseller: true, review_count: 15
          }
        ];
        renderBestsellers(staticProducts);
      }

      function goToProduct(productId) {
        window.location.href = `/product/${productId}`;
      }

      function addToCart(productId) {
        // Add to cart functionality
        console.log('Adding product to cart:', productId);
        alert('Product added to cart!');
      }

      // Newsletter and authentication functions are defined in base.html

      // Modal functions
      function showNewsletterModal() {
        document.getElementById('newsletterModal').style.display = 'block';
      }

      function closeNewsletterModal() {
        document.getElementById('newsletterModal').style.display = 'none';
      }

      function showAuthModal() {
        document.getElementById('authModal').style.display = 'block';
      }

      function closeAuthModal() {
        document.getElementById('authModal').style.display = 'none';
      }

      function showSignUpForm() {
        document.getElementById('signinForm').style.display = 'none';
        document.getElementById('signupForm').style.display = 'block';
      }

      function showSignInForm() {
        document.getElementById('signupForm').style.display = 'none';
        document.getElementById('signinForm').style.display = 'block';
      }

      function handleNewsletterSubmit(event) {
        event.preventDefault();
        const email = document.getElementById('newsletterEmail').value;
        subscribeNewsletter(email);
        closeNewsletterModal();
      }

      function handleSignIn(event) {
        event.preventDefault();
        const email = document.getElementById('signinEmail').value;
        const password = document.getElementById('signinPassword').value;
        signIn(email, password);
        closeAuthModal();
      }

      function handleSignUp(event) {
        event.preventDefault();
        const userData = {
          first_name: document.getElementById('signupFirstName').value,
          last_name: document.getElementById('signupLastName').value,
          email: document.getElementById('signupEmail').value,
          password: document.getElementById('signupPassword').value
        };
        signUp(userData);
        closeAuthModal();
      }
    </script>

    <!-- Newsletter Modal -->
    <div id="newsletterModal" class="modal" style="display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
        <div class="modal-content" style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: none; width: 80%; max-width: 500px; border-radius: 10px;">
            <span class="close" onclick="closeNewsletterModal()" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
            <h2>Subscribe to our Newsletter</h2>
            <p>Get 10% off your first order and stay updated with our latest products!</p>
            <form onsubmit="handleNewsletterSubmit(event)">
                <input type="email" id="newsletterEmail" placeholder="Enter your email" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                <button type="submit" style="background-color: #a3bfdb; color: black; padding: 10px 20px; border: 1px solid black; border-radius: 30px; cursor: pointer; width: 100%;">Subscribe</button>
            </form>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal" style="display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
        <div class="modal-content" style="background-color: #fefefe; margin: 15% auto; padding: 20px; border: none; width: 80%; max-width: 400px; border-radius: 10px;">
            <span class="close" onclick="closeAuthModal()" style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
            
            <div id="signinForm">
                <h2>Sign In</h2>
                <form onsubmit="handleSignIn(event)">
                    <input type="email" id="signinEmail" placeholder="Email" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                    <input type="password" id="signinPassword" placeholder="Password" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                    <button type="submit" style="background-color: #a3bfdb; color: black; padding: 10px 20px; border: 1px solid black; border-radius: 30px; cursor: pointer; width: 100%; margin: 10px 0;">Sign In</button>
                </form>
                <p style="text-align: center;">Don't have an account? <a href="#" onclick="showSignUpForm()" style="color: #134fc2;">Sign Up</a></p>
            </div>
            
            <div id="signupForm" style="display: none;">
                <h2>Sign Up</h2>
                <form onsubmit="handleSignUp(event)">
                    <input type="text" id="signupFirstName" placeholder="First Name" style="width: 48%; padding: 10px; margin: 10px 1% 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                    <input type="text" id="signupLastName" placeholder="Last Name" style="width: 48%; padding: 10px; margin: 10px 0 10px 1%; border: 1px solid #ddd; border-radius: 5px;">
                    <input type="email" id="signupEmail" placeholder="Email" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                    <input type="password" id="signupPassword" placeholder="Password" required style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px;">
                    <button type="submit" style="background-color: #a3bfdb; color: black; padding: 10px 20px; border: 1px solid black; border-radius: 30px; cursor: pointer; width: 100%; margin: 10px 0;">Sign Up</button>
                </form>
                <p style="text-align: center;">Already have an account? <a href="#" onclick="showSignInForm()" style="color: #134fc2;">Sign In</a></p>
            </div>
        </div>
    </div>

  </body>
</html>